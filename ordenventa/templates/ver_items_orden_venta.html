{% extends 'base.html' %}

{% block content %}
<h1 class="mb-4">Items de la Orden de Venta {{ ordenventa }}</h1>

<!-- Botón para ver las órdenes de compra relacionadas -->
<button type="button" class="btn btn-primary" onclick="location.href='{% url 'ver_ordenes_compra' ordenventa.id %}'">Ver Órdenes de Compra</button>

<!-- Contenedor para la tabla de items que será actualizada por HTMX -->
<div id="items-container">
    <!-- Aquí se incluiría el contenido de "fragmentos/items_orden_venta.html" si es necesario -->
    <!-- Ejemplo de tabla con items de orden de venta, ajustar según sea necesario -->
    <table class="table">
        <thead class="table-dark">
            <tr>
                <th>Seleccionar</th>
                <th>Número de Artículo</th>
                <th>Descripción del Artículo</th>
                <th>Cantidad</th>
                <th>Precio Bruto</th>
                <th>Total Bruto</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr class="{% if not item.enviado %}table-success{% endif %}">
                <td><input type="checkbox" name="selected_items" value="{{ item.id }}"></td>
                <td>{{ item.nro_articulo }}</td>
                <td>{{ item.desc_articulo }}</td>
                <td>{{ item.cantidad }}</td>
                <td>{{ item.precio_bruto | floatformat:2 }}</td>
                <td>{{ item.total_bruto | floatformat:2 }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6">No hay items en esta orden de venta.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}

